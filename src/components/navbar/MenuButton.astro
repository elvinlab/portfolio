---
import Burguer from "@/components/icons/BurgerIcon.astro";
import { getI18N } from "@/i18n";

const { currentLocale } = Astro;
const i18n = getI18N({ currentLocale });
---

<div class="relative inline-block text-left lg:hidden">
  <button
    class="menu-button inline-flex justify-center items-center rounded-lg border border-slate-300 dark:border-slate-700 p-1.5 text-slate-600 dark:text-slate-400 hover:border-accent dark:hover:border-accent hover:text-accent-dark dark:hover:text-accent transition-all duration-200"
    aria-label="Open menu"
  >
    <Burguer class="h-5 w-5" />
  </button>
  <ul
    id="ul-menu-responsive"
    class="hidden absolute right-0 z-10 mt-2 min-w-[180px] origin-top-right rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-lg hidden-menu overflow-hidden"
  >
    <li>
      {
        i18n.NAVBAR.map((route) => (
          <a
            href={route.PATH}
            aria-label={route.LABEL}
            class="block px-4 py-2.5 text-sm text-slate-700 dark:text-slate-300 hover:bg-accent-muted hover:text-accent-dark dark:hover:text-accent transition-colors"
          >
            {route.TITLE}
          </a>
        ))
      }
    </li>
  </ul>
</div>

<script is:inline>
  const burgeButton = document.querySelector(".menu-button");
  const burgerOpen = document.querySelector(".hidden-menu");
  const languageOpen = document.querySelector(".hidden-language-menu");

  burgeButton?.addEventListener("click", () => {
    burgerOpen?.classList.toggle("hidden");
    languageOpen?.classList.add("hidden");
  });
</script>
