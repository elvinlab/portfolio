---
import GitHubAltIcon from "@/components/icons/GitHubAltIcon.astro";
import NextJSIcon from "@/components/icons/NextJSIcon.astro";
import TailwindIcon from "@/components/icons/TailwindIcon.astro";
import LinkIcon from "@/components/icons/LinkIcon.astro";
import CodeIcon from "@/components/icons/CodeIcon.astro";
import LinkButton from "./LinkButton.astro";
import Modal from "@/components/projects/Modal.astro";
import ReactIcon from "../icons/ReactIcon.astro";
import MaterialIcon from "../icons/MaterialIcon.astro";
import MongoDBIcon from "../icons/MongoDBIcon.astro";
import NodeIcon from "../icons/NodeIcon.astro";
import FirebaseIcon from "../icons/FirebaseIcon.astro";
import AngularIcon from "../icons/AngularIcon.astro";
import LaravelIcon from "../icons/LaravelIcon.astro";
import MySqlIcon from "../icons/MySqlIcon.astro";
import { getI18N } from "@/i18n";

const { currentLocale } = Astro;
const i18n = getI18N({ currentLocale });

const TAGS = {
  NEXT: {
    name: "Next.js",
    class: "bg-slate-900 text-white dark:bg-slate-700",
    icon: NextJSIcon,
  },
  TAILWIND: {
    name: "TailwindCSS",
    class: "bg-cyan-900/80 text-cyan-100",
    icon: TailwindIcon,
  },
  REACT: {
    name: "React",
    class: "bg-sky-900/80 text-sky-100",
    icon: ReactIcon,
  },
  MATERIAL: {
    name: "Material UI",
    class: "bg-blue-900/80 text-blue-100",
    icon: MaterialIcon,
  },
  MONGODB: {
    name: "MongoDB",
    class: "bg-emerald-900/80 text-emerald-100",
    icon: MongoDBIcon,
  },
  NODE: {
    name: "Node.js",
    class: "bg-green-900/80 text-green-100",
    icon: NodeIcon,
  },
  FIREBASE: {
    name: "Firebase",
    class: "bg-amber-900/80 text-amber-100",
    icon: FirebaseIcon,
  },
  ANGULAR: {
    name: "Angular",
    class: "bg-red-900/80 text-red-100",
    icon: AngularIcon,
  },
  LARAVEL: {
    name: "Laravel",
    class: "bg-rose-900/80 text-rose-100",
    icon: LaravelIcon,
  },
  MYSQL: {
    name: "MySQL",
    class: "bg-blue-800/80 text-blue-100",
    icon: MySqlIcon,
  },
};

const PROJECTS = [
  {
    id: i18n.PROJECTS.HACIENDA.ID,
    title: i18n.PROJECTS.HACIENDA.TITLE,
    description: i18n.PROJECTS.HACIENDA.DESCRIPTION,
    link: i18n.PROJECTS.HACIENDA.DEPLOY_LINK,
    github: i18n.PROJECTS.HACIENDA.GITHUB_LINK,
    image: i18n.PROJECTS.HACIENDA.IMGS[0].LINK,
    tags: [TAGS.TAILWIND, TAGS.REACT, TAGS.MATERIAL, TAGS.MONGODB, TAGS.NODE],
    imgs: i18n.PROJECTS.HACIENDA.IMGS,
  },
  {
    id: i18n.PROJECTS.SPOTIFY.ID,
    title: i18n.PROJECTS.SPOTIFY.TITLE,
    description: i18n.PROJECTS.SPOTIFY.DESCRIPTION,
    link: i18n.PROJECTS.SPOTIFY.DEPLOY_LINK,
    github: i18n.PROJECTS.SPOTIFY.GITHUB_LINK,
    image: i18n.PROJECTS.SPOTIFY.IMGS[0].LINK,
    tags: [TAGS.TAILWIND, TAGS.REACT, TAGS.MONGODB, TAGS.NEXT],
    imgs: i18n.PROJECTS.SPOTIFY.IMGS,
  },
  {
    id: i18n.PROJECTS.UNAVACUNA.ID,
    title: i18n.PROJECTS.UNAVACUNA.TITLE,
    description: i18n.PROJECTS.UNAVACUNA.DESCRIPTION,
    link: i18n.PROJECTS.UNAVACUNA.DEPLOY_LINK,
    github: i18n.PROJECTS.UNAVACUNA.GITHUB_LINK,
    image: i18n.PROJECTS.UNAVACUNA.IMGS[0].LINK,
    tags: [TAGS.TAILWIND, TAGS.REACT, TAGS.MONGODB, TAGS.NEXT, TAGS.FIREBASE],
    imgs: i18n.PROJECTS.UNAVACUNA.IMGS,
  },
  {
    id: i18n.PROJECTS.GUANAMUEBLES.ID,
    title: i18n.PROJECTS.GUANAMUEBLES.TITLE,
    description: i18n.PROJECTS.GUANAMUEBLES.DESCRIPTION,
    link: i18n.PROJECTS.GUANAMUEBLES.DEPLOY_LINK,
    github: i18n.PROJECTS.GUANAMUEBLES.GITHUB_LINK,
    image: i18n.PROJECTS.GUANAMUEBLES.IMGS[0].LINK,
    tags: [TAGS.TAILWIND, TAGS.ANGULAR, TAGS.FIREBASE, TAGS.LARAVEL, TAGS.MYSQL],
    imgs: i18n.PROJECTS.GUANAMUEBLES.IMGS,
  },
];
---

<h3
  class="flex items-center mb-10 text-2xl font-semibold gap-x-3 text-slate-900 dark:text-white"
>
  <CodeIcon class="size-5 text-accent-dark dark:text-accent" />
  {i18n.TILES.LAST_PROJECTS}
</h3>

<div class="flex flex-col gap-y-16">
  {
    PROJECTS.map(
      ({ image, title, description, tags, link, github, imgs, id }) => (
        <article class="flex flex-col gap-8 group md:flex-row">
          <Modal id={id} imgs={imgs} />
          <div class="w-full md:w-1/2">
            <div class="relative overflow-hidden rounded-xl border border-slate-200 dark:border-slate-800 transition-all duration-300 group-hover:border-accent/30 group-hover:shadow-lg group-hover:shadow-accent/5">
              <img
                onclick={`document.getElementById('projectModal-${id}').showModal();`}
                alt={title}
                class="object-cover object-top w-full h-48 sm:h-64 md:h-full transition-transform duration-500 group-hover:scale-[1.02] cursor-pointer"
                loading="lazy"
                src={image}
              />
            </div>
          </div>
          <div class="w-full md:w-1/2 flex flex-col justify-center">
            <h3 class="text-xl font-bold text-slate-900 dark:text-white">
              {title}
            </h3>
            <p class="mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-400">
              {description}
            </p>
            <ul class="mt-4 flex flex-wrap gap-2">
              {tags.map((tag) => (
                <li>
                  <span
                    class={`flex items-center gap-x-1.5 rounded-full text-xs py-1 px-2.5 ${tag.class}`}
                  >
                    <tag.icon class="size-3.5" />
                    {tag.name}
                  </span>
                </li>
              ))}
            </ul>
            <footer class="flex items-center mt-6 gap-x-3">
              {github && (
                <LinkButton href={github}>
                  <GitHubAltIcon class="size-4" />
                  Code
                </LinkButton>
              )}
              {link && (
                <LinkButton href={link}>
                  <LinkIcon class="size-3.5" />
                  Demo
                </LinkButton>
              )}
            </footer>
          </div>
        </article>
      )
    )
  }
</div>
